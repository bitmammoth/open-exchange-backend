<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>apiary</title>
</head>
<body>
  <script src="https://api.apiary.io/seeds/embed.js"></script>
  <script>
    var embed = new Apiary.Embed({
      apiBlueprint: "FORMAT: 1A\nHOST: https://8m3unj9isf.execute-api.ap-northeast-1.amazonaws.com/test\n\n# Currency exchange API\nCurrency exchange is a simple API allowing user\nget exchagne rate between difference currency and day.\n\n# Formatting\nDate format use ISO 8601 date string format [ISO8601](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)\n\n# Group Exchange Rate\n\n## Historical exchange rate [/currency/exchange/historical/{from}{?startDate}{?endDate}]\n\n### Historical exchange rate [GET]\n+ Parameters\n    + from (string, required) ... Base exchange currency\n    + startDate(date, required) ... Start date of result\n    + endDate(date, required) ... End date of result (exclusive)\n    + pageToken (string, optional) ... Page token that return from previos response\n+ Response 200 (application/json)\n\n        {\n            success: true,\n            response_timestamp: 1495304420703,\n            data: {\n                base: \"USD\",\n                from: \"20161231\",\n                to: \"20170531\",\n                rates: {\n                    \"20170520\": {\n                        \"FJD\": 2.087302,\n                        \"MXN\": 18.7159,\n                        \"STD\": 21864.049805,\n                        \"SCR\": 13.695,\n                        \"CDF\": 1417.5,\n                        \"BBD\": 2,\n                        \"GTQ\": 7.304677,\n                        \"CLP\": 668.5,\n                        \"HNL\": 23.288384,\n                        \"UGX\": 3610.75,\n                        \"ZAR\": 13.232635,\n                        \"TND\": 2.434496,\n                        \"CUC\": 1,\n                        \"BSD\": 1,\n                        \"SLL\": 7455,\n                        \"SDG\": 6.69,\n                        \"IQD\": 1163.4,\n                        \"CUP\": 25.5,\n                        \"GMD\": 46.1,\n                        \"TWD\": 30.006,\n                        ......\n                    }\n                }\n            }\n        }\n\n\n## Least exchange rate [/currency/exchange/least/{from}]\n\n### Least exchange rate [GET]\n+ Parameters\n    + from (string, required) ... Base exchange currency\n+ Response 200 (application/json)\n\n        {\n            success: true,\n            response_timestamp: 1495304420703,\n            data: {\n                base: \"USD\",\n                from: \"20161231\",\n                to: \"20170531\",\n                rates: {\n                    \"20170520\": {\n                        \"FJD\": 2.087302,\n                        \"MXN\": 18.7159,\n                        \"STD\": 21864.049805,\n                        \"SCR\": 13.695,\n                        \"CDF\": 1417.5,\n                        \"BBD\": 2,\n                        \"GTQ\": 7.304677,\n                        \"CLP\": 668.5,\n                        \"HNL\": 23.288384,\n                        \"UGX\": 3610.75,\n                        \"ZAR\": 13.232635,\n                        \"TND\": 2.434496,\n                        \"CUC\": 1,\n                        \"BSD\": 1,\n                        \"SLL\": 7455,\n                        \"SDG\": 6.69,\n                        \"IQD\": 1163.4,\n                        \"CUP\": 25.5,\n                        \"GMD\": 46.1,\n                        \"TWD\": 30.006,\n                        ......\n                    }\n                }\n            }\n        }\n\n\n# Group Convert currency amount\n## Convert currency with historical exchange rate [/currency/convert/historical/{from}/to/{to}{?amount}{?startDate}{?endDate}]\n\n### Historical amount [GET]\n+ Parameters\n    + from (string, required) ... Base exchange currency\n    + to (string, required) ... Target currency to be converted\n    + startDate(date, required) ... Start date of result\n    + endDate(date, required) ... End date of result (exclusive)\n    + amount(number, required) ... Amount in base currency\n+ Response 200 (application/json)\n\n        {\n            success: true,\n            response_timestamp: 1495304420703,\n            data: {\n                base: \"USD\",\n                targetCurrency: \"HKD\",\n                baseAmount: 300,\n                from: \"20161231\",\n                to: \"20170531\",\n                rates: {\n                    \"20170501\": 2333.5749,\n                    \"20170502\": 2334.3585000000003,\n                    \"20170503\": 2334.354,\n                    \"20170504\": 2334.813,\n                    \"20170505\": 2335.2,\n                    \"20170506\": 2335.2,\n                    \"20170507\": 2335.095,\n                    \"20170508\": 2335.4259,\n                    \"20170509\": 2335.245,\n                    \"20170510\": 2335.86,\n                    \"20170511\": 2336.8092,\n                    \"20170512\": 2338.098,\n                    \"20170513\": 2338.098,\n                    \"20170514\": 2338.0875,\n                    \"20170515\": 2336.0265,\n                    \"20170516\": 2336.217,\n                    \"20170517\": 2335.6965,\n                    \"20170518\": 2334.9516000000003,\n                    \"20170519\": 2334.9915,\n                    \"20170520\": 2334.9927,\n                    \"20170521\": 2335.005\n                }\n            }\n        }\n\n## Convert currency with least exchange rate [/currency/convert/least/{from}/to/{to}{?amount}]\n\n### Least amount [GET]\n+ Parameters\n    + from (string, required) ... Base exchange currency\n    + to (string, required) ... Target currency to be converted\n    + amount(number, required) ... Amount in base currency\n+ Response 200 (application/json)\n\n        {\n            success: true,\n            response_timestamp: 1495304420703,\n            data: {\n                base: \"USD\",\n                targetCurrency: \"HKD\",\n                baseAmount: 300,\n                from: \"20161231\",\n                to: \"20170531\",\n                rates: {\n                    \"20170521\": 2335.005\n                }\n            }\n        }"
    });

    if (false) {
        var changed = null
        var xhrChanged = new XMLHttpRequest();
        var xhrData = new XMLHttpRequest();
        setInterval(function() {
            xhrChanged.open('GET', window.location.href + "/changed", true);
            xhrChanged.send();

            xhrChanged.onreadystatechange = function() {
                if (xhrChanged.readyState == 4 && xhrChanged.status == 200) {
                    if (!changed) {
                        changed = xhrChanged.responseText
                    }
                    if (changed != xhrChanged.responseText) {
                        changed = xhrChanged.responseText
                        xhrData.open('GET', window.location.href + "/source", true);
                        xhrData.send();

                        xhrData.onreadystatechange = function() {
                            if (xhrData.readyState == 4 && xhrData.status == 200) {
                                embed.iframeElement.contentWindow.postMessage({"origin": embed.ORIGIN, "eventType": "anonymousPreview", "data": {"code": xhrData.responseText}}, '*');
                            }
                        }
                    }
                }
            }
        }, 1000);
    }
  </script>
</body>
</html>
